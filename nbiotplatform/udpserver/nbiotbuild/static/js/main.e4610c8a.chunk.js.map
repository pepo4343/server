{"version":3,"sources":["logo.svg","Components/Map/Map.module.css","App.js","Components/LineChart/LineChart.js","Components/Card/Card.js","Components/Gauge/Gauge.js","Components/Map/Map.js","serviceWorker.js","index.js","Components/LineChart/LineChart.module.css","Components/Card/Card.module.css","bus.png","dialog.png"],"names":["module","exports","socket","time_format","d3","LineChart","props","useState","chartCreated","setChartCreated","firstTimeAnimation","setFirstTimeAnimation","data","useEffect","length","updateChart","width","height","padding","createChart","CHART_WIDTH","CHART_HEIGHT","PADDING","svg","x_scale","domain","d","date","range","y_scale","val","x_axis","tickFormat","y_axis","append","attr","call","transition","duration","createLine","id","color","line","x","y","datum","x_axis_data","shift","tickSize","chart_scale","newData","arr","Object","values","Math","max","ticks","val1","path","totalLength","node","getTotalLength","line2","val2","path2","totalLength2","line3","val3","path3","totalLength3","className","styles","Card","style","children","Gauge","gaugecom","setGaugeCom","gauge","container","configuration","that","config","size","clipWidth","clipHeight","ringInset","ringWidth","pointerWidth","pointerTailLength","pointerHeadLengthPercent","minValue","maxValue","minAngle","maxAngle","transitionMs","majorTicks","labelFormat","labelInset","arcColorFn","interpolate","undefined","r","pointerHeadLength","arc","scale","tickData","pointer","deg2rad","deg","PI","markers","configure","prop","round","linearScale","idx","i","minVal","maxVal","map","innerRadius","outerRadius","startAngle","ratio","endAngle","update","newValue","newConfiguration","newAngle","ease","isRendered","render","centerTx","selectAll","enter","text","lineData","pointerLine","curve","pg","gauge_id","console","log","Map","mapcontainer","useRef","setMap","overlay","setOverlay","window","google","maps","current","center","lat","lng","zoom","OverlayView","route","select","empty","v","onAdd","firsttime","firsttime_velo","firsttime_text","layer","offsetWidth","offsetHeight","draw","projection","this","getProjection","each","routetransform","transform","bus","vtransform","dialog","texttransform","latlong","LatLng","fromLatLngToContainerPixel","BUS_IMAGE_SIZE","onRemove","ref","App","setData","location","setLocation","gaugeData","setGaugeData","socketio","openSocket","connect","on","connected","velocity","lastLocation","lastTime","sensor_data","JSON","parse","msg","Lat","Lng","dev_id","Date","now","push","getDistance","latitude","longitude","reduce","p","c","PM1_0","PM2_5","PM10_0","changeData","bind","e","curData","fontSize","marginTop","marginBottom","marginLeft","fontWeight","borderTop","marginRight","margin","display","top","position","Boolean","hostname","match","ReactDOM","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.e4610c8a.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"test\":\"Map_test__3RFCo\"};","import React, { useEffect, useState } from \"react\";\nimport logo from \"./logo.svg\";\nimport \"./App.css\";\nimport LineChart from \"./Components/LineChart/LineChart\";\nimport Card from \"./Components/Card/Card\";\nimport Gauge from \"./Components/Gauge/Gauge\";\nimport openSocket from \"socket.io-client\";\nimport Map from \"./Components/Map/Map\";\nimport * as d3 from \"d3\";\n\nimport { getDistance } from \"geolib\";\n\nvar socket;\n\nconst time_parse = d3.timeParse(\"%m/%d/%Y %H:%M:%S\");\nconst time_format = d3.timeFormat(\"%Y\");\n\nfunction App() {\n  const [data, setData] = useState([]);\n  const [location, setLocation] = useState([]);\n  const [gaugeData, setGaugeData] = useState([]);\n  useEffect(() => {\n    socket = openSocket(\"http://178.128.16.9/\");\n    var socketio = socket.connect();\n    socket.on(\"connect\", () => {\n      console.log(\"check\", socketio.connected);\n    });\n    socket.on(\"disconnect\", () => {\n      console.log(\"check\", socketio.connected);\n    });\n    socket.on(\"numclient\", (data) => {\n      console.log(data);\n    });\n    const velocity = [];\n    let lastLocation = 0;\n    let lastTime = 0;\n    socket.on(\"message\", (data) => {\n      try {\n        const sensor_data = JSON.parse(data.msg);\n        const { Lat, Lng, dev_id } = sensor_data;\n\n        console.log(dev_id);\n\n        if (dev_id != \"0001\") {\n          return;\n        }\n        console.log(Lat);\n        console.log(Lng);\n        console.log(Date.now());\n        if (lastLocation != 0) {\n          if (velocity.length == 3) {\n            velocity.shift();\n          }\n          velocity.push(\n            (((getDistance(\n              lastLocation,\n              { latitude: Lat, longitude: Lng },\n              0.01\n            ) /\n              (Date.now() - lastTime)) *\n              5) /\n              18) *\n              1000\n          );\n          console.log(velocity);\n        }\n        var average = (arr) => arr.reduce((p, c) => p + c, 0) / arr.length;\n        lastLocation = { latitude: Lat, longitude: Lng };\n        lastTime = Date.now();\n        setLocation([{ lat: Lat, lng: Lng, v: Math.round(average(velocity)) }]);\n        setGaugeData([\n          sensor_data.PM1_0,\n          sensor_data.PM2_5,\n          sensor_data.PM10_0,\n        ]);\n        setData(changeData.bind(this, sensor_data));\n      } catch (e) {\n        console.log(e);\n\n        return;\n      }\n    });\n\n    setLocation([{ lat: 13.740766, lng: 100.535039, v: 100 }]);\n\n    const changeData = (data, curData) => {\n      const newData = [...curData];\n\n      if (curData.length < 10) {\n        newData.push({\n          val1: data.PM1_0,\n          val2: data.PM2_5,\n          val3: data.PM10_0,\n          date: Date.now(),\n        });\n      } else {\n        newData.push({\n          val1: data.PM1_0,\n          val2: data.PM2_5,\n          val3: data.PM10_0,\n          date: Date.now(),\n        });\n        newData.shift();\n      }\n\n      return newData;\n    };\n  }, []);\n\n  return (\n    <div className=\"App\">\n      <div>\n        <div>\n          <h1\n            style={{\n              fontSize: 80,\n              marginTop: 5,\n              marginBottom: 5,\n              marginLeft: 20,\n              color: \"white\",\n            }}\n          >\n            NB-<span style={{ fontWeight: 400 }}>IoT</span>\n          </h1>\n        </div>\n        <Card width={900}>\n          <h2>PM chart</h2>\n          <LineChart\n            data={data}\n            width={800}\n            height={400}\n            padding={50}\n          ></LineChart>\n          <div className=\"legends-container\">\n            <div className=\"legend-container\">\n              <div\n                style={{\n                  borderTop: \"solid 3px red\",\n                  width: 25,\n                  marginRight: 5,\n                }}\n              ></div>\n              <p style={{ margin: 0 }}>PM 1</p>\n            </div>\n            <div className=\"legend-container\">\n              <div\n                style={{\n                  borderTop: \"solid 3px blue\",\n                  width: 25,\n                  marginRight: 5,\n                }}\n              ></div>\n              <p style={{ margin: 0 }}>PM 2.5</p>\n            </div>\n            <div className=\"legend-container\">\n              <div\n                style={{\n                  borderTop: \"solid 3px green\",\n                  width: 25,\n                  marginRight: 5,\n                }}\n              ></div>\n              <p style={{ margin: 0 }}>PM 10</p>\n            </div>\n          </div>\n        </Card>\n        <div style={{ display: \"flex\" }}>\n          <Card width={287}>\n            <h2>PM 1</h2>\n            <Gauge gauge_id=\"pm1\" data={gaugeData[0]}></Gauge>\n            <h1\n              style={{\n                margin: 0,\n                top: -30,\n                position: \"relative\",\n                fontSize: 50,\n              }}\n            >\n              {gaugeData[0]}\n              <span style={{ fontSize: 30 }}>\n                {\" \"}\n                &micro;g/m<sup>3</sup>\n              </span>\n            </h1>\n          </Card>\n          <Card width={287}>\n            <h2>PM 2.5</h2>\n            <Gauge gauge_id=\"pm25\" data={gaugeData[1]}></Gauge>\n            <h1\n              style={{\n                margin: 0,\n                top: -30,\n                position: \"relative\",\n                fontSize: 50,\n              }}\n            >\n              {gaugeData[1]}\n              <span style={{ fontSize: 30 }}>\n                {\" \"}\n                &micro;g/m<sup>3</sup>\n              </span>\n            </h1>\n          </Card>\n          <Card width={287}>\n            <h2>PM 10</h2>\n            <Gauge gauge_id=\"pm10\" data={gaugeData[2]}></Gauge>\n            <h1\n              style={{\n                margin: 0,\n                top: -30,\n                position: \"relative\",\n                fontSize: 50,\n              }}\n            >\n              {gaugeData[2]}\n              <span style={{ fontSize: 30 }}>\n                {\" \"}\n                &micro;g/m<sup>3</sup>\n              </span>\n            </h1>\n          </Card>\n        </div>\n      </div>\n\n      <Card width={900}>\n        <Map data={location}></Map>\n      </Card>\n    </div>\n  );\n}\n\nconst generateData = (n) => {\n  let results = [];\n\n  for (let i = 0; i <= n; i++) {\n    results.push({\n      date: time_parse(2020 - n + i),\n      val: Math.random() * 1000,\n    });\n  }\n  return results;\n};\n\nconst createChart = () => {\n  const data = generateData(10);\n  data.forEach(function (e, i) {\n    data[i].date = time_parse(e.date);\n  });\n  let i = 1;\n  setInterval(() => {\n    data.push({ date: time_parse(2020 + i), val: Math.random() * 1000 });\n\n    data.shift();\n  }, 2000);\n};\n\nexport default App;\n","import React, { useEffect, useState } from \"react\";\nimport styles from \"./LineChart.module.css\";\nimport * as d3 from \"d3\";\n\nconst time_format = d3.timeFormat(\"%H:%M:%S\");\n\nconst LineChart = props => {\n  const [chartCreated, setChartCreated] = useState(false);\n  const [firstTimeAnimation, setFirstTimeAnimation] = useState(true);\n  const [lastLineLength, setLastLineLength] = useState(0);\n  const { data } = props;\n\n  useEffect(() => {\n    if (!chartCreated) {\n      createChart(data, props.width, props.height, props.padding);\n      setChartCreated(true);\n    } else {\n      if (data.length != 0) {\n        updateChart(\"line1\", data, props.width, props.height, props.padding);\n      }\n    }\n  }, [data]);\n  const createChart = (data, CHART_WIDTH, CHART_HEIGHT, PADDING) => {\n    const svg = d3.select(\"svg\");\n    const x_scale = d3\n      .scaleTime()\n      .domain([\n        d3.min(data, d => {\n          return d.date;\n        }),\n        d3.max(data, d => {\n          return d.date;\n        })\n      ])\n      .range([PADDING, CHART_WIDTH - PADDING]);\n\n    var y_scale = d3\n      .scaleLinear()\n      .domain([\n        0,\n        d3.max(data, function(d) {\n          return d.val;\n        })\n      ])\n      .range([CHART_HEIGHT - PADDING, PADDING]);\n\n    // Create SVG\n\n    var x_axis = d3\n      .axisBottom(x_scale)\n\n      .tickFormat(time_format);\n    var y_axis = d3.axisLeft(y_scale);\n    svg\n      .append(\"defs\")\n      .append(\"clipPath\")\n      .attr(\"id\", \"clip\")\n      .append(\"rect\")\n      .attr(\"transform\", \"translate(\" + PADDING + \",\" + -PADDING + \")\")\n      .attr(\"height\", props.height);\n    svg\n      .append(\"g\")\n      .attr(\"class\", \"x-axis\")\n      .attr(\"transform\", \"translate(0,\" + (CHART_HEIGHT - PADDING) + \")\")\n      .call(x_axis)\n      .transition()\n      .duration(1000);\n    svg\n      .append(\"g\")\n      .attr(\"transform\", \"translate(\" + PADDING + \",0)\")\n      .attr(\"class\", \"y-axis\")\n      .call(y_axis)\n      .transition()\n      .duration(1000);\n    createLine(\"line1\", svg, data, x_scale, y_scale, \"red\");\n    createLine(\"line2\", svg, data, x_scale, y_scale, \"blue\");\n    createLine(\"line3\", svg, data, x_scale, y_scale, \"green\");\n  };\n  const createLine = (id, svg, data, x_scale, y_scale, color) => {\n    // Create Line\n    var line = d3\n      .line()\n      .x(function(d) {\n        return x_scale(d.date);\n      })\n      .y(function(d) {\n        return y_scale(d.val);\n      });\n\n    const path = svg\n      .append(\"g\")\n      .attr(\"clip-path\", \"url(#clip)\")\n\n      .append(\"path\")\n      .attr(\"class\", id)\n      .datum(data)\n      .attr(\"fill\", \"none\")\n      .attr(\"stroke\", color)\n      .attr(\"stroke-width\", 2)\n      .attr(\"d\", line);\n  };\n\n  const updateChart = (id, data, CHART_WIDTH, CHART_HEIGHT, PADDING) => {\n    if (data.length < 3) {\n      return;\n    }\n    const x_axis_data = [...data];\n    x_axis_data.shift();\n\n    const x_scale = d3\n      .scaleTime()\n      .domain([\n        d3.min(x_axis_data, d => {\n          return d.date;\n        }),\n        d3.max(x_axis_data, d => {\n          return d.date;\n        })\n      ])\n      .range([PADDING, CHART_WIDTH - PADDING]);\n\n    const tickSize = x_scale(data[2].date) - x_scale(data[1].date);\n\n    const clipath = d3\n      .select(\"#clip rect\")\n      .attr(\"width\", props.width - PADDING - PADDING + 1);\n    const chart_scale = d3\n      .scaleTime()\n      .domain([\n        d3.min(data, d => {\n          return d.date;\n        }),\n        d3.max(data, d => {\n          return d.date;\n        })\n      ])\n      .range([PADDING, CHART_WIDTH - PADDING + tickSize]);\n\n    var y_scale = d3\n      .scaleLinear()\n      .domain([\n        0,\n        d3.max(data, function(d) {\n          const newData = { ...d };\n          newData.date = 0;\n          let arr = Object.values(newData);\n          return Math.max(...arr);\n        })\n      ])\n      .range([CHART_HEIGHT - PADDING, PADDING]);\n\n    var x_axis = d3\n      .axisBottom(x_scale)\n      .ticks(5)\n      .tickFormat(time_format);\n    var y_axis = d3.axisLeft(y_scale).ticks(12);\n\n    //line 1\n    var line = d3\n      .line()\n      .x(function(d) {\n        return chart_scale(d.date);\n      })\n      .y(function(d) {\n        return y_scale(d.val1);\n      });\n\n    d3.select(\".x-axis\")\n\n      .transition()\n      .duration(1000)\n      .call(x_axis);\n\n    d3.select(\".y-axis\")\n      .transition()\n      .duration(1000)\n      .call(y_axis);\n\n    const path = d3\n      .select(\".\" + id)\n      .datum(data)\n      .attr(\"d\", line);\n    const totalLength = path.node().getTotalLength();\n\n    if (firstTimeAnimation) {\n      path\n        .attr(\"stroke-dasharray\", totalLength + \" \" + totalLength)\n        .attr(\"stroke-dashoffset\", totalLength)\n        .attr(\"transform\", \"translate(\" + -tickSize + \",0)\")\n        .transition()\n        .duration(2000)\n        .attr(\"stroke-dashoffset\", 0);\n      setFirstTimeAnimation(false);\n    } else {\n      path\n        .attr(\"stroke-dasharray\", null)\n        .attr(\"stroke-dashoffset\", null)\n        .attr(\"transform\", \"translate(\" + 0 + \",0)\")\n        .transition()\n        .duration(1000)\n        .attr(\"transform\", \"translate(\" + -tickSize + \",0)\")\n        .attr(\"stroke-dashoffset\", 0);\n    }\n\n    // line 2\n    var line2 = d3\n      .line()\n      .x(function(d) {\n        return chart_scale(d.date);\n      })\n      .y(function(d) {\n        return y_scale(d.val2);\n      });\n\n    const path2 = d3\n      .select(\".line2\")\n      .datum(data)\n      .attr(\"d\", line2);\n    const totalLength2 = path2.node().getTotalLength();\n\n    if (firstTimeAnimation) {\n      path2\n        .attr(\"stroke-dasharray\", totalLength2 + \" \" + totalLength2)\n        .attr(\"stroke-dashoffset\", totalLength2)\n        .attr(\"transform\", \"translate(\" + -tickSize + \",0)\")\n        .transition()\n        .duration(2000)\n        .attr(\"stroke-dashoffset\", 0);\n      setFirstTimeAnimation(false);\n    } else {\n      path2\n        .attr(\"stroke-dasharray\", null)\n        .attr(\"stroke-dashoffset\", null)\n        .attr(\"transform\", \"translate(\" + 0 + \",0)\")\n        .transition()\n        .duration(1000)\n        .attr(\"transform\", \"translate(\" + -tickSize + \",0)\")\n        .attr(\"stroke-dashoffset\", 0);\n    }\n\n    // line 3\n    var line3 = d3\n      .line()\n      .x(function(d) {\n        return chart_scale(d.date);\n      })\n      .y(function(d) {\n        return y_scale(d.val3);\n      });\n\n    const path3 = d3\n      .select(\".line3\")\n      .datum(data)\n      .attr(\"d\", line3);\n    const totalLength3 = path3.node().getTotalLength();\n\n    if (firstTimeAnimation) {\n      path3\n        .attr(\"stroke-dasharray\", totalLength3 + \" \" + totalLength3)\n        .attr(\"stroke-dashoffset\", totalLength3)\n        .attr(\"transform\", \"translate(\" + -tickSize + \",0)\")\n        .transition()\n        .duration(2000)\n        .attr(\"stroke-dashoffset\", 0);\n      setFirstTimeAnimation(false);\n    } else {\n      path3\n        .attr(\"stroke-dasharray\", null)\n        .attr(\"stroke-dashoffset\", null)\n        .attr(\"transform\", \"translate(\" + 0 + \",0)\")\n        .transition()\n        .duration(1000)\n        .attr(\"transform\", \"translate(\" + -tickSize + \",0)\")\n        .attr(\"stroke-dashoffset\", 0);\n    }\n  };\n\n  return (\n    <div id=\"line_chart\" className={styles.LineChart}>\n      <svg\n        width={props.width}\n        height={props.height}\n        padding={props.padding}\n      ></svg>\n    </div>\n  );\n};\n\nexport default LineChart;\n","import React from \"react\";\n\nimport styles from \"./Card.module.css\";\n\nconst Card = props => {\n  return (\n    <div className={styles.Card} style={{ width: props.width }}>\n      {props.children}\n    </div>\n  );\n};\n\nexport default Card;\n","import React, { useEffect, useState } from \"react\";\nimport styles from \"./Gauge.module.css\";\nimport * as d3 from \"d3\";\nconst Gauge = (props) => {\n  const { data } = props;\n  const [gaugecom, setGaugeCom] = useState(null);\n  var gauge = function (container, configuration) {\n    var that = {};\n    var config = {\n      size: 710,\n      clipWidth: 200,\n      clipHeight: 110,\n      ringInset: 20,\n      ringWidth: 20,\n\n      pointerWidth: 10,\n      pointerTailLength: 5,\n      pointerHeadLengthPercent: 0.9,\n\n      minValue: 0,\n      maxValue: 40,\n\n      minAngle: -90,\n      maxAngle: 90,\n\n      transitionMs: 750,\n\n      majorTicks: 5,\n      labelFormat: d3.format(\"d\"),\n      labelInset: 10,\n\n      arcColorFn: d3\n        .scaleLinear()\n        .domain([0, 0.5, 1])\n        .range([\"#1a9850\", \"#fee08b\", \"#d73027\"])\n        .interpolate(d3.interpolateHsl),\n    };\n    var range = undefined;\n    var r = undefined;\n    var pointerHeadLength = undefined;\n    var value = 0;\n\n    var svg = undefined;\n    var arc = undefined;\n    var scale = undefined;\n    var ticks = undefined;\n    var tickData = undefined;\n    var pointer = undefined;\n\n    var donut = d3.pie();\n\n    function deg2rad(deg) {\n      return (deg * Math.PI) / 180;\n    }\n\n    function newAngle(d) {\n      var ratio = scale(d);\n      var newAngle = config.minAngle + ratio * range;\n      return newAngle;\n    }\n\n    var markers = [0, 10, 20, 30, 40, 50, 60, 70, 80];\n\n    function configure(configuration) {\n      var prop = undefined;\n      for (prop in configuration) {\n        config[prop] = configuration[prop];\n      }\n\n      range = config.maxAngle - config.minAngle;\n      r = config.size / 2;\n      pointerHeadLength = Math.round(r * config.pointerHeadLengthPercent);\n\n      // a linear scale that maps domain values to a percent from 0..1\n      const linearScale = d3.scaleLinear().range([0, 1]).domain([0, 10]);\n\n      scale = function (val) {\n        var idx = markers.length;\n        for (var i = markers.length - 1; i >= 0; i--) {\n          idx = i;\n          if (val >= markers[i]) {\n            break;\n          }\n        }\n\n        var minVal = markers[idx];\n        var maxVal = markers[markers.length - 1];\n\n        if (val < markers[markers.length - 1]) {\n          maxVal = markers[idx + 1];\n        }\n        return d3\n          .scaleLinear()\n          .range([\n            idx * (1.0 / config.majorTicks),\n            (idx + 1) * (1.0 / config.majorTicks),\n          ])\n          .domain([minVal, maxVal])(val);\n      };\n\n      ticks = linearScale.ticks(config.majorTicks);\n      tickData = d3.range(config.majorTicks).map(function () {\n        return 1 / config.majorTicks;\n      });\n\n      arc = d3\n        .arc()\n        .innerRadius(r - config.ringWidth - config.ringInset)\n        .outerRadius(r - config.ringInset)\n        .startAngle(function (d, i) {\n          var ratio = d * i;\n          return deg2rad(config.minAngle + ratio * range);\n        })\n        .endAngle(function (d, i) {\n          var ratio = d * (i + 1);\n          return deg2rad(config.minAngle + ratio * range);\n        });\n    }\n    that.configure = configure;\n\n    function centerTranslation() {\n      return \"translate(\" + r + \",\" + r + \")\";\n    }\n\n    function isRendered() {\n      return svg !== undefined;\n    }\n    that.isRendered = isRendered;\n\n    function render(newValue) {\n      svg = d3\n        .select(container)\n        .append(\"svg:svg\")\n        .attr(\"class\", \"gauge\")\n        .attr(\"width\", config.clipWidth)\n        .attr(\"height\", config.clipHeight);\n\n      var centerTx = centerTranslation();\n\n      var arcs = svg\n        .append(\"g\")\n        .attr(\"class\", \"arc\")\n        .attr(\"transform\", centerTx);\n\n      arcs\n        .selectAll(\"path\")\n        .data(tickData)\n        .enter()\n        .append(\"path\")\n        .attr(\"fill\", function (d, i) {\n          return config.arcColorFn(d * i);\n        })\n        .attr(\"d\", arc);\n\n      var lg = svg\n        .append(\"g\")\n        .attr(\"class\", \"label\")\n        .attr(\"transform\", centerTx);\n      lg.selectAll(\"text\")\n        //.data(ticks)\n        .data(markers)\n        .enter()\n        .append(\"text\")\n        .attr(\"transform\", function (d, i) {\n          // var ratio = scale(d);\n          var ratio = i / config.majorTicks;\n          var newAngle = config.minAngle + ratio * range;\n          return (\n            \"rotate(\" +\n            newAngle +\n            \") translate(0,\" +\n            (config.labelInset - r) +\n            \")\"\n          );\n        })\n        .text(config.labelFormat);\n\n      var lineData = [\n        [config.pointerWidth / 2, 0],\n        [0, -pointerHeadLength],\n        [-(config.pointerWidth / 2), 0],\n        [0, config.pointerTailLength],\n        [config.pointerWidth / 2, 0],\n      ];\n      var pointerLine = d3.line().curve(d3.curveLinear);\n      var pg = svg\n        .append(\"g\")\n        .data([lineData])\n        .attr(\"class\", \"pointer\")\n        .attr(\"transform\", centerTx);\n\n      pointer = pg\n        .append(\"path\")\n        .attr(\"d\", pointerLine /*function(d) { return pointerLine(d) +'Z';}*/)\n        .attr(\"transform\", \"rotate(\" + config.minAngle + \")\");\n\n      update(newValue === undefined ? 0 : newValue);\n    }\n    that.render = render;\n    function update(newValue, newConfiguration) {\n      if (newConfiguration !== undefined) {\n        configure(newConfiguration);\n      }\n      var ratio = scale(newValue);\n      var newAngle = config.minAngle + ratio * range;\n      pointer\n        .transition()\n        .duration(config.transitionMs)\n        .ease(d3.easeElastic)\n        .attr(\"transform\", \"rotate(\" + newAngle + \")\");\n    }\n    that.update = update;\n\n    configure(configuration);\n\n    return that;\n  };\n\n  useEffect(() => {\n    if (!gaugecom) {\n      setGaugeCom(\n        gauge(\"#\" + props.gauge_id, {\n          size: 250,\n          clipWidth: 250,\n          clipHeight: 180,\n          ringWidth: 50,\n          maxValue: 60,\n          transitionMs: 2000,\n          majorTicks: 8,\n        })\n      );\n    }\n  }, []);\n  useEffect(() => {\n    if (gaugecom) {\n      console.log(gaugecom.isRendered());\n      if (!gaugecom.isRendered()) {\n        gaugecom.render();\n        gaugecom.update(data);\n      }\n      console.log(data);\n      gaugecom.update(data);\n    }\n  }, [gaugecom, data]);\n\n  return <div id={props.gauge_id}></div>;\n};\n\nexport default Gauge;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport styles from \"./Map.module.css\";\nimport * as d3 from \"d3\";\nimport bus from \"../../bus.png\";\nimport dialog from \"../../dialog.png\";\n\nconst BUS_IMAGE_SIZE = 40;\nconst DIALOG_IMAGE_WIDTH = 120;\n\nconst Map = (props) => {\n  const mapcontainer = useRef(null);\n  const { data } = props;\n\n  const [map, setMap] = useState(null);\n  const [overlay, setOverlay] = useState(null);\n  useEffect(() => {\n    setMap(\n      new window.google.maps.Map(mapcontainer.current, {\n        center: { lat: 13.741307, lng: 100.533518 },\n        zoom: 16,\n      })\n    );\n    setOverlay(new window.google.maps.OverlayView());\n  }, []);\n  useEffect(() => {\n    if (!mapcontainer) {\n      return;\n    }\n\n    if (!map) {\n      return;\n    }\n    if (!overlay) {\n      return;\n    }\n\n    if (data.length == 0) {\n      return;\n    }\n\n    const route = [\n      [\n        [13.735406, 100.531831],\n        [13.734605, 100.531697],\n        [13.734195, 100.534123],\n        [13.745312, 100.535775],\n        [13.746148, 100.530848],\n        [13.739681, 100.529821],\n        [13.739176, 100.532807],\n        [13.73903, 100.533089],\n        [13.73891, 100.533204],\n        [13.737891, 100.533061],\n        [13.737417, 100.532536],\n        [13.737479, 100.532073],\n        [13.735406, 100.531831],\n      ],\n    ];\n    if (d3.select(\"text.textvelo\").select(\"tspan.velo\").empty()) {\n      var text = d3.select(\"text.textvelo\");\n\n      text\n        .append(\"tspan\")\n        .attr(\"class\", \"velo\")\n        .text(data[0].v)\n        .style(\"font-size\", 32)\n        .style(\"font-weight\", 600)\n        .attr(\"fill\", \"white\");\n      text\n        .append(\"tspan\")\n        .style(\"font-size\", 18)\n        .style(\"font-weight\", 400)\n        .attr(\"fill\", \"white\")\n        .text(\" km/hr\");\n    } else {\n      d3.select(\"text.textvelo\").select(\"tspan.velo\").text(data[0].v);\n    }\n\n    overlay.setMap(null);\n    overlay.onAdd = function () {\n      //   var layer = d3\n      //     .select(this.getPanes().overlayLayer)\n      //     .append(\"div\")\n      //     .attr(\"class\", \"stations\");\n\n      let firsttime = true;\n      let firsttime_velo = true;\n      let firsttime_text = true;\n      if (d3.select(mapcontainer.current).select(\"svg\").empty()) {\n        var layer = d3\n          .select(mapcontainer.current)\n          .append(\"svg\")\n          .attr(\"width\", mapcontainer.current.offsetWidth)\n          .attr(\"height\", mapcontainer.current.offsetHeight)\n          .style(\"top\", 0)\n          .style(\"left\", 0)\n          .style(\"position\", \"absolute\")\n          .style(\"pointer-events\", \"none\");\n      } else {\n        layer = d3.select(mapcontainer.current).select(\"svg\");\n      }\n\n      // Draw each marker as a separate SVG element.\n      // We could use a single SVG, but what size would it have?\n      overlay.draw = function () {\n        var projection = this.getProjection();\n\n        const busroute = layer\n          .selectAll(\"path.route\")\n          .data(route)\n          .each(routetransform)\n          .enter()\n          .append(\"path\")\n          .each(routetransform)\n          .attr(\"stroke\", \"#f06eaa\")\n          .attr(\"stroke-width\", \"4\")\n          .attr(\"fill\", \"none\")\n          .attr(\"class\", \"route\");\n\n        var marker = layer\n          .selectAll(\"image.marker\")\n          .data(data)\n          .each(transform) // update existing markers\n\n          .enter()\n          .append(\"svg:image\")\n          .each(transform)\n          .attr(\"xlink:href\", bus)\n          .attr(\"width\", BUS_IMAGE_SIZE)\n          .attr(\"height\", BUS_IMAGE_SIZE)\n\n          .attr(\"class\", \"marker\");\n        var velocity = layer\n          .selectAll(\"image.velocitywrapper\")\n          .data(data)\n          .each(vtransform) // update existing markers\n\n          .enter()\n          .append(\"svg:image\")\n          .each(vtransform)\n          .attr(\"xlink:href\", dialog)\n          .attr(\"width\", DIALOG_IMAGE_WIDTH)\n          .attr(\"class\", \"velocitywrapper\");\n        var velocitytext = layer\n          .selectAll(\"text\")\n          .data(data)\n          .each(texttransform) // update existing markers\n          .enter()\n          .append(\"text\")\n          .attr(\"class\", \"textvelo\")\n          .each(texttransform);\n\n        function routetransform(d) {\n          let path = \"\";\n          for (let i in d) {\n            let latlong = new window.google.maps.LatLng(d[i][0], d[i][1]);\n            const { x, y } = projection.fromLatLngToContainerPixel(latlong);\n            if (i == 0) {\n              path += \"M\" + x + \",\" + y + \" \";\n              continue;\n            }\n            path += \"L\" + x + \",\" + y + \" \";\n          }\n\n          return d3.select(this).attr(\"d\", path);\n        }\n\n        function transform(d) {\n          d = new window.google.maps.LatLng(d.lat, d.lng);\n          d = projection.fromLatLngToContainerPixel(d);\n\n          if (firsttime) {\n            firsttime = false;\n            return d3\n              .select(this)\n              .transition()\n              .duration(1000)\n              .attr(\"x\", d.x - BUS_IMAGE_SIZE / 2 + \"px\")\n              .attr(\"y\", d.y - BUS_IMAGE_SIZE / 2 + \"px\");\n          } else {\n            return d3\n              .select(this)\n              .attr(\"x\", d.x - BUS_IMAGE_SIZE / 2 + \"px\")\n              .attr(\"y\", d.y - BUS_IMAGE_SIZE / 2 + \"px\");\n          }\n        }\n\n        function vtransform(d) {\n          d = new window.google.maps.LatLng(d.lat, d.lng);\n          d = projection.fromLatLngToContainerPixel(d);\n\n          if (firsttime_velo) {\n            firsttime_velo = false;\n            return d3\n              .select(this)\n              .transition()\n              .duration(1000)\n              .attr(\"x\", d.x + \"px\")\n              .attr(\"y\", d.y - DIALOG_IMAGE_WIDTH + 5 + \"px\");\n          } else {\n            return d3\n              .select(this)\n              .attr(\"x\", d.x + \"px\")\n              .attr(\"y\", d.y - DIALOG_IMAGE_WIDTH + 5 + \"px\");\n          }\n        }\n        function texttransform(d) {\n          let data = new window.google.maps.LatLng(d.lat, d.lng);\n\n          data = projection.fromLatLngToContainerPixel(data);\n\n          if (firsttime_text) {\n            firsttime_text = false;\n            return d3\n              .select(this)\n              .transition()\n              .duration(1000)\n\n              .attr(\"x\", data.x + 5 + \"px\")\n              .attr(\"y\", data.y - DIALOG_IMAGE_WIDTH + 30 + 18 + \"px\");\n          } else {\n            return d3\n              .select(this)\n\n              .attr(\"x\", data.x + 5 + \"px\")\n              .attr(\"y\", data.y - DIALOG_IMAGE_WIDTH + 30 + 18 + \"px\");\n          }\n        }\n      };\n    };\n    overlay.onRemove = function () {\n      console.log(\"removing\");\n    };\n\n    // Bind our overlay to the mapâ€¦\n    overlay.setMap(map);\n  }, [data, map, overlay]);\n  return (\n    <div ref={mapcontainer} style={{ width: \"100%\", height: \"100%\" }}></div>\n  );\n};\n\nexport default Map;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"LineChart\":\"LineChart_LineChart__2Aieq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Card\":\"Card_Card__nPa-c\"};","module.exports = __webpack_public_path__ + \"static/media/bus.e99f54e5.png\";","module.exports = __webpack_public_path__ + \"static/media/dialog.ae72a2c4.png\";"],"sourceRoot":""}